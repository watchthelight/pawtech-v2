# Pawtropolis Tech Bot Handbook

Everything you need to know about the bot ‚Äî what it does, who can use it, and how.

---

## Table of Contents

1. [Gate System (Application Review)](#gate-system-application-review)
2. [Moderator Tools](#moderator-tools)
3. [Suggestion System](#suggestion-system)
4. [Artist Rotation](#artist-rotation)
5. [Movie Night](#movie-night)
6. [Role Automation](#role-automation)
7. [Configuration](#configuration)
8. [Utility & Admin](#utility--admin)
9. [Permission Reference](#permission-reference)
10. [Troubleshooting](#troubleshooting)

---

## Gate System (Application Review)

The gate system is how new members join the server. When someone wants in, they fill out an application in the gate channel. The bot creates a review embed in the staff channel with all their answers, and staff can claim it, look it over, and decide whether to accept, reject, or kick them.

### How Applications Work

Here's the flow from start to finish:

1. **Someone applies** ‚Äî They click the Verify button in the gate channel and answer the questions you've set up (up to 5 questions)
2. **Bot creates a review** ‚Äî An embed appears in the review channel showing their answers, how old their account is, when they joined, and a short code like `A1B2C3` for quick reference
3. **A mod claims it** ‚Äî Click the Claim button so other mods know you're handling this one
4. **You make the call** ‚Äî Use the Accept, Reject, or Kick buttons (or slash commands if the buttons aren't working)
5. **Bot handles the rest** ‚Äî Accepted users get the member role and a welcome message. Rejected users get a DM explaining why. Kicked users are removed.

**Visual Flow:**

```mermaid
flowchart TD
    A[User Clicks Verify] --> B{Has Active App?}
    B -->|Yes| C[Show Error]
    B -->|No| D[Show Question Modal]
    D --> E[User Fills Answers]
    E --> F{All Required<br/>Answered?}
    F -->|No| G[Show Retry Button]
    F -->|Yes| H[Submit Application]
    H --> I[Create Review Card]
    I --> J[Notify Staff]
```

**What happens behind the scenes:**

When someone clicks Verify, the bot checks if they have a permanent rejection on file. If they do, the bot stops them right there. If they're clear, the bot creates a draft application in the database and shows them a modal (popup form) with the first set of questions.

If you've set up more than 5 questions, the bot splits them into multiple pages. Discord only allows 5 text inputs per modal, so the bot shows a Next button to continue. All answers get saved as they go, so if someone closes the modal by accident, their progress isn't lost.

Once they submit the final page, the bot does a few things at once:
- Marks the application as "submitted" in the database
- Creates a review card in your staff channel with all their answers
- Optionally scans their avatar for inappropriate content (if you have that feature enabled)
- Logs the submission for analytics

**The review card shows:**

- **Applicant info**: Username, user ID, account age
- **Application metadata**: When submitted, short code (like `A1B2C3`), whether it's claimed
- **Status indicators**: If they have modmail open, if they left the server, if they're flagged
- **Avatar scan results**: Risk score if avatar scanning is enabled
- **Application history**: Past applications from this same user (if any)
- **Action history**: Recent moderator actions on this application
- **All their answers**: Each question and response, formatted clearly

The review card updates live when mods take actions. If someone claims it, the card shows who claimed it. When accepted or rejected, the card changes color and shows the decision.

### What the Claim System Does

The claim system prevents two mods from working on the same application at the same time. When you click Claim Application, the bot records that you're reviewing it. Other mods see "Claimed by @YourName" and can't click the decision buttons until you release it.

Claims are stored in the database and survive bot restarts. If you claimed an app yesterday and the bot restarted overnight, your claim is still there.

**Why this matters:** Without claims, two mods could both click Accept at the same time. The applicant would get two welcome messages, or the database could get confused. Claims prevent that.

**Workflow:**

```mermaid
flowchart LR
    A[Unclaimed App] --> B[Mod Clicks Claim]
    B --> C[Claim Recorded]
    C --> D{Mod Takes Action}
    D -->|Accept| E[Accept Flow]
    D -->|Reject| F[Reject Flow]
    D -->|Kick| G[Kick Flow]
    D -->|Unclaim| H[Release Claim]
    E --> I[Claim Preserved]
    F --> I
    G --> I
    H --> A
```

If you claimed something but need to step away, use `/unclaim` to release it. The app goes back to the unclaimed pool and another mod can grab it.

### `/gate`
**Who can use it:** Staff (Manage Messages)

This is how you set up and configure the whole application system.

| Subcommand | What it does |
|------------|--------------|
| `setup` | First-time setup ‚Äî tells the bot which channels to use and what role to give accepted members |
| `status` | Shows you the numbers ‚Äî how many apps total, how many pending, accepted, rejected, etc. |
| `config` | Displays all your current settings so you can double-check everything |
| `reset` | Wipes all application data and starts fresh. Be careful with this one! |
| `welcome set` | Change what the welcome message says when someone gets accepted |
| `welcome preview` | See what the welcome message will look like before going live |
| `welcome channels` | Pick which channels get welcome messages |
| `welcome role` | Choose a role to ping when welcoming new members |
| `set-questions` | Set the questions applicants have to answer (q1 through q5) |

**Placeholders you can use in welcome messages:**
- `{applicant.mention}` ‚Äî @mentions the new member
- `{applicant.username}` ‚Äî just their name
- `{applicant.id}` ‚Äî their Discord ID
- `{channel.rules}` ‚Äî links to #rules
- `{channel.roles}` ‚Äî links to #roles
- `{server.name}` ‚Äî the server name
- `{server.memberCount}` ‚Äî current member count

**Examples:**
```
/gate setup review_channel:#staff-review gate_channel:#apply general_channel:#general accepted_role:@Member
/gate welcome set content:Welcome {applicant.mention}! üéâ Check out {channel.rules} and grab some roles in {channel.roles}!
/gate set-questions q1:What is the password? q2:How did you find us? q3:Tell us about yourself
```

---

### `/accept`
**Who can use it:** Staff (Reviewer role or Manage Guild)

Use this to approve someone's application. They'll get the member role and a welcome message will be posted.

You need to tell the bot which application you mean. Pick ONE of these:
- `app:A1B2C3` ‚Äî the short code shown on the review embed
- `user:@Username` ‚Äî mention them or pick from the list
- `uid:123456789012345678` ‚Äî their Discord ID (handy if they already left)

**What happens when you accept someone:**

```mermaid
flowchart TD
    A[Accept Command] --> B{Check Claim}
    B -->|Not Claimed by You| C[Show Error]
    B -->|OK| D[Update DB Status]
    D --> E[Assign Member Role]
    E --> F{Role Success?}
    F -->|Yes| G[Send Welcome DM]
    F -->|No| H[Show Permission Error]
    G --> I[Post Welcome Message]
    I --> J[Close Modmail If Open]
    J --> K[Update Review Card]
    K --> L[Log Action]
```

Step by step:
1. The bot checks if you're the one who claimed this app (or if it's unclaimed)
2. Changes the application status to "approved" in the database
3. Tries to give them the member role you configured in `/gate setup`
4. Sends them a DM letting them know they were accepted (if their DMs are open)
5. Posts a welcome message in your general channel (uses the template from `/gate welcome set`)
6. Closes their modmail thread if they had one open
7. Updates the review card to show "Approved" in green
8. Logs the action for `/modstats` tracking

**Common issues and what the bot does:**

- **Member role fails:** The bot tells you it couldn't assign the role. This usually means the bot's role is lower than the member role in your server's role list, or the bot lacks Manage Roles permission. Fix the permissions and manually assign the role.
- **DM fails:** If their DMs are closed, the bot still approves them but notes the DM failed. They won't get the acceptance notification.
- **Welcome message fails:** If the bot can't post in your general channel (wrong permissions, channel deleted), it tells you but still approves them.

**Examples:**
```
/accept app:A1B2C3
/accept user:@CoolPerson
/accept uid:123456789012345678
```

---

### `/reject`
**Who can use it:** Staff (Reviewer role or Manage Guild)

Use this when you need to turn someone down. You have to give a reason, and they'll get a DM explaining why (if their DMs are open).

| Option | Required? | What it does |
|--------|-----------|--------------|
| `reason` | **Yes** | Why you're rejecting them ‚Äî this gets sent to the user and logged (max 500 characters) |
| `app` | No | The short code from the review embed |
| `user` | No | Mention them or pick from the list |
| `uid` | No | Their Discord ID |
| `perm` | No | Set this to `true` if they should never be allowed to apply again |

Pick ONE of app/user/uid ‚Äî not multiple.

**What happens when you reject someone:**
1. They get a DM with your reason (if their DMs are open)
2. The review embed updates to show the rejection and reason
3. If you used `perm:true`, they're blocked from ever applying again
4. They get kicked from the server
5. It all gets logged for mod stats

**When to use permanent rejection:**
- Obvious spam or bot accounts
- People who break rules during the application
- Repeat offenders who keep getting rejected
- Underage users

**Examples:**
```
/reject app:A1B2C3 reason:Incorrect password - please re-read the rules and try again
/reject user:@SpamBot reason:Bot account perm:true
/reject uid:123456789012345678 reason:Underage perm:true
```

---

### `/kick`
**Who can use it:** Staff (Reviewer role or Manage Guild)

This removes someone from the server but doesn't count as a formal rejection. Good for situations where they just need to try again.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `reason` | **Yes** | Why you're kicking them |
| `app` | No | Short code |
| `user` | No | Mention or picker |
| `uid` | No | Discord ID |

**When to kick vs when to reject:**
- **Kick:** They made a mistake, didn't finish their app, need another shot
- **Reject:** You're formally denying them and want it on record

**Examples:**
```
/kick app:A1B2C3 reason:Incomplete application - please try again
/kick user:@Username reason:Application timed out
```

---

### `/unclaim`
**Who can use it:** Staff

If you claimed an application but can't finish reviewing it, use this to release it so someone else can take over.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `app` | No | Short code |
| `user` | No | Mention or picker |
| `uid` | No | Discord ID |

**Examples:**
```
/unclaim app:A1B2C3
/unclaim user:@Username
```

---

### `/listopen`
**Who can use it:** Staff (Reviewer role or Manage Guild)

See what applications are waiting for review.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `scope` | No | What to show (default: `mine`) |

**Scope options:**
| Scope | What you'll see |
|-------|-----------------|
| `mine` | Just the apps you've claimed (default) |
| `all` | Everything that's open ‚Äî claimed and unclaimed |
| `drafts` | Applications people started but haven't finished yet |

The list shows you the applicant's name, the short code, who claimed it (if anyone), and how long it's been waiting.

**Examples:**
```
/listopen
/listopen scope:all
/listopen scope:drafts
```

---

### `/search`
**Who can use it:** Staff (Reviewer role or Manage Guild)

Look up someone's entire application history ‚Äî every app they've submitted, what happened, and which mod handled it.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `user` | **Yes** | Who to look up |

You'll see their total number of applications, each one with the date, outcome, and handling mod. If they were rejected, you'll see the reasons. It also shows if they're currently blocked.

**Example:**
```
/search user:@Username
```

---

### `/unblock`
**Who can use it:** Staff

Made a mistake with a permanent rejection? Or did someone's appeal get approved? Use this to let them apply again.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `target` | No | Mention the user |
| `user_id` | No | Their Discord ID (if they left) |
| `username` | No | Their username as a fallback |
| `reason` | No | Why you're unblocking them ‚Äî gets logged |

**Examples:**
```
/unblock target:@Username reason:Appeal approved by leadership
/unblock user_id:123456789012345678 reason:Mistaken identity - wrong person
```

---

## Moderator Tools

These commands help you track how mods are doing, spot patterns, and keep an eye on things.

### `/modstats`
**Who can use it:** Staff

See how active moderators are and how they're performing.

| Subcommand | What it does |
|------------|--------------|
| `leaderboard` | Ranks mods by how many apps they've handled |
| `user` | Deep dive into a specific mod's stats |
| `export` | Download everything as a CSV file |
| `reset` | Wipe and rebuild the stats (needs admin password) |

**Options:**
| Option | Works with | What it does |
|--------|------------|--------------|
| `days` | All | How far back to look (default: 30 days) |
| `moderator` | `user` | Which mod to analyze |

**The leaderboard shows:**
- Rankings by total decisions
- Accept and reject counts
- Approval rate percentage
- Average response time

**Individual mod stats show:**
- Total decisions they've made
- Accept vs reject breakdown with percentages
- Response time percentiles (p50 and p95)
- Day-by-day activity
- Anomaly detection (flags if something seems off)

**Examples:**
```
/modstats leaderboard days:7
/modstats user moderator:@ModName days:30
/modstats export days:90
```

---

### `/modhistory`
**Who can use it:** Leadership only (server owners or designated leaders)

This gives you a detailed look at everything a specific mod has done. It's for oversight and performance reviews, which is why it's restricted to leadership.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `moderator` | **Yes** | Who to look into |
| `days` | No | How far back (default: 30, max: 365) |
| `export` | No | Download as CSV |

**You'll see:**
- Every accept, reject, and kick they've made
- Timestamps for each action
- How long they took to respond
- The reasons they gave for rejections
- Anomaly scores (flags unusual patterns)

**Examples:**
```
/modhistory moderator:@ModName days:60
/modhistory moderator:@ModName days:90 export:true
```

---

### `/analytics`
**Who can use it:** Staff

Visual charts showing review activity over time. Helpful for spotting busy periods or figuring out when you need more coverage.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `from` | No | Start date (Unix timestamp) |
| `to` | No | End date (Unix timestamp) |
| `all-guilds` | No | Include all servers (bot owners only) |
| `bucket` | No | Group by `hourly`, `daily`, or `weekly` |

**The charts show:**
- How many apps came in over time
- Accept vs reject distribution
- Peak activity hours and days
- Trend lines

**Examples:**
```
/analytics
/analytics bucket:daily
/analytics bucket:weekly
```

---

### `/analytics-export`
**Who can use it:** Staff

Same data as `/analytics` but downloaded as a CSV so you can dig into it yourself.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `from` | No | Start date |
| `to` | No | End date |
| `all-guilds` | No | Include all servers (owners only) |

---

### `/flag`
**Who can use it:** Staff

Mark someone as suspicious. Flagged users show a warning badge on their applications so other mods know to look closer.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `user` | **Yes** | Who to flag |
| `reason` | No | Why ‚Äî this shows to other staff |

**Good reasons to flag someone:**
- Suspicious account (brand new, no avatar, weird username)
- You think they're an alt of someone banned
- Other members reported them
- Bad history in other servers

**Examples:**
```
/flag user:@SuspiciousUser reason:Alt account of banned user
/flag user:@NewAccount reason:Suspicious join pattern - review carefully
```

---

### `/approval-rate`
**Who can use it:** Staff

See the big picture ‚Äî what percentage of applications get approved vs rejected server-wide.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `days` | No | How far back to look (default: 30) |

**You'll see:**
- Total applications received
- Approval rate percentage
- Rejection rate percentage
- How it compares to the previous period
- Common rejection reasons (if there are patterns)

**Examples:**
```
/approval-rate
/approval-rate days:7
/approval-rate days:90
```

---

## Suggestion System

A way for community members to submit feature ideas for the bot, vote on them, and for staff to manage them. Think of it like a suggestion box where everyone can see what others have suggested and vote on their favorites.

### How It Works

The suggestion system lets your community help shape the bot's future. Here's the complete flow from idea to implementation:

1. **Someone has an idea** ‚Äî They use `/suggest` to submit a feature idea
2. **The bot posts it** ‚Äî The suggestion appears in the configured suggestions channel as an embed with a unique ID number
3. **The community votes** ‚Äî Other members can click upvote or downvote buttons on the suggestion
4. **Voting updates live** ‚Äî Each time someone votes, the embed updates to show the current vote count
5. **Staff reviews it** ‚Äî Staff can approve, deny, or mark it as implemented using `/suggestion`
6. **The embed updates** ‚Äî When staff takes action, the suggestion embed changes color and shows the decision
7. **They get notified** ‚Äî The person who suggested it gets a DM explaining what happened
8. **Voting closes** ‚Äî Once a suggestion is approved, denied, or implemented, voting buttons are removed

```mermaid
graph TD
    A[User submits /suggest] --> B[Bot checks cooldown]
    B -->|On cooldown| C[Show wait time]
    B -->|Ready| D[Create suggestion in database]
    D --> E[Post embed in suggestions channel]
    E --> F[Add upvote/downvote buttons]
    F --> G[Community votes]
    G --> H[Vote counts update in real-time]
    H --> I[Staff reviews with /suggestion]
    I --> J{Staff Decision}
    J -->|Approve| K[Update embed - Green]
    J -->|Deny| L[Update embed - Red]
    J -->|Implement| M[Update embed - Blue]
    K --> N[Remove vote buttons]
    L --> N
    M --> N
    N --> O[Send DM to suggester]
```

### How Voting Works

Anyone in the server can vote on open suggestions. Here's what you need to know:

- **One vote per person** ‚Äî You can upvote or downvote, but not both
- **Change your mind** ‚Äî Click the other button to switch your vote
- **Only open suggestions** ‚Äî You can't vote on suggestions that have been approved, denied, or implemented
- **Vote counts are public** ‚Äî Everyone can see how many upvotes and downvotes a suggestion has
- **Your vote is recorded** ‚Äî The bot remembers your vote even if you switch it later

When you click a vote button, the bot instantly updates the suggestion embed to show the new vote totals. If you try to vote the same way twice, the bot will tell you that you've already voted that way.

### Cooldown System

To prevent spam, there's a cooldown between submissions. The cooldown is configurable by server admins (default is usually a few minutes to an hour). If you try to submit another suggestion too soon, the bot will tell you how many minutes you need to wait.

The cooldown only applies to new submissions, not to voting on other people's suggestions.

### `/suggest`
**Who can use it:** Everyone

Submit an idea for a new bot feature. There's a cooldown between submissions to prevent spam.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `suggestion` | **Yes** | Your idea (max 1000 characters) |

**What happens when you submit:**
1. Bot checks if you're on cooldown (if so, shows how long to wait)
2. Bot checks if the suggestions channel is configured (if not, tells you to contact an admin)
3. Your suggestion gets saved to the database with a unique ID
4. An embed appears in the suggestions channel showing your suggestion
5. Upvote and downvote buttons are added below the embed
6. You get a confirmation message with a link to view your suggestion

**Tips for good suggestions:**
- Be specific about what you want (not just "make the bot better")
- Explain why it would be useful (helps staff understand the value)
- Keep it focused on one feature (don't bundle multiple ideas together)
- Check existing suggestions first so you don't duplicate (use `/suggestions` to browse)
- Stay under 1000 characters (Discord enforces this limit)

**Examples:**
```
/suggest suggestion:Add a command to view server statistics like member count over time
/suggest suggestion:Let users set their own timezone for event notifications
/suggest suggestion:Add a way to export mod stats as a spreadsheet for monthly reports
```

---

### `/suggestions`
**Who can use it:** Everyone

Browse through all the suggestions people have submitted. Results are shown 5 suggestions per page with navigation buttons.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `status` | No | Filter by status (default: open) |

**Status options:**
| Status | What it shows |
|--------|---------------|
| `open` | New ones waiting for review (default) |
| `approved` | Approved and planned for the future |
| `denied` | Turned down with a reason why |
| `implemented` | Done and live in the bot! |
| `all` | Everything regardless of status |

**The list shows:**
- Suggestion ID number (you need this for `/suggestion` commands)
- Who suggested it and when
- Current vote counts (upvotes and downvotes)
- Current status (open, approved, denied, or implemented)
- Brief preview of the suggestion text

**Navigation:**
If there are more than 5 suggestions, you'll see Previous and Next buttons at the bottom. Click them to browse through the pages. The buttons remember your current filter (status) as you navigate.

**Examples:**
```
/suggestions
/suggestions status:approved
/suggestions status:implemented
/suggestions status:all
```

---

### `/suggestion`
**Who can use it:** Staff (Manage Messages)

Manage suggestions ‚Äî approve them, deny them, or mark them done. When you take action, the suggestion embed updates and the user gets notified via DM.

| Subcommand | What it does |
|------------|--------------|
| `approve` | Green light it ‚Äî means you're planning to add it |
| `deny` | Turn it down with a reason |
| `implement` | Mark it as shipped and live |
| `delete` | Remove it entirely (use sparingly) |

**Options:**
| Option | Works with | What it does |
|--------|------------|--------------|
| `id` | All | The suggestion's ID number (required) |
| `response` | `approve`, `implement` | Optional message to the suggester |
| `reason` | `deny` | Why you're denying it (required for deny) |

**What happens when you approve:**
1. Suggestion status changes to "approved" in the database
2. The embed in the suggestions channel updates with a green color and shows who approved it
3. Vote buttons are removed (voting closes after approval)
4. The suggester gets a DM saying their idea was approved, with your optional response
5. You get a confirmation message

**What happens when you deny:**
1. Suggestion status changes to "denied"
2. The embed updates with a red color, showing who denied it and why
3. Vote buttons are removed
4. The suggester gets a DM explaining why it was denied (your reason is included)
5. You get a confirmation message

**What happens when you implement:**
1. Suggestion status changes to "implemented"
2. The embed updates with a blue/purple color showing it's done
3. Vote buttons are removed
4. The suggester gets a DM celebrating that their idea is now live
5. You get a confirmation message

**What happens when you delete:**
1. The suggestion is removed from the database
2. The embed message in the channel is deleted (if possible)
3. No DM is sent to the suggester
4. You get a confirmation message

**When to use each action:**
- **Approve** ‚Äî The idea is good and you plan to add it eventually
- **Deny** ‚Äî The idea doesn't fit the bot's purpose, is too complex, or won't work
- **Implement** ‚Äî The feature has been built and is now available
- **Delete** ‚Äî The suggestion is spam, inappropriate, or was posted by mistake

**Examples:**
```
/suggestion approve id:42 response:Great idea! Adding to the roadmap for next month.
/suggestion deny id:43 reason:This is outside the scope of what the bot does.
/suggestion implement id:42 response:This is now live! Thanks for the suggestion.
/suggestion implement id:55
/suggestion delete id:99
```

---

## Artist Rotation

A queue system that fairly distributes art commissions among Server Artists. When someone redeems an art reward, the next artist in line gets assigned.

### How the Queue Works

1. **Artists join the queue** ‚Äî Anyone with the <@&1201395606455562341> role is automatically in
2. **Order is set** ‚Äî By default it's based on when they joined, but you can adjust it
3. **Someone redeems a reward** ‚Äî When you use `/redeemreward`, the next available artist gets assigned
4. **Artist moves to back** ‚Äî After an assignment, that artist goes to the end of the line
5. **Skip if needed** ‚Äî Artists can be temporarily skipped if they're on vacation or too busy

### `/artistqueue`
**Who can use it:** Manage Roles permission

Manage who's in the queue and their order.

| Subcommand | What it does |
|------------|--------------|
| `list` | See the current queue order and who's skipped |
| `sync` | Update the queue to match who currently has the Server Artist role |
| `move` | Put an artist at a specific position in the queue |
| `skip` | Temporarily take an artist out of rotation |
| `unskip` | Put them back in rotation |
| `history` | See past art reward assignments |
| `setup` | First-time setup ‚Äî syncs the queue and gets everything configured |

**Examples:**
```
/artistqueue list
/artistqueue sync
/artistqueue move user:@Artist position:1
/artistqueue skip user:@Artist reason:On vacation until Dec 15
/artistqueue unskip user:@Artist
/artistqueue history limit:20
/artistqueue history user:@Artist limit:10
```

---

### `/redeemreward`
**Who can use it:** Manage Roles permission

Use this in a ticket channel when someone is redeeming an art prize. It assigns the next artist and adds them to the ticket.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `user` | **Yes** | Who's redeeming the reward |
| `type` | **Yes** | What kind of art |
| `artist` | No | Override the queue and pick a specific artist |

**Art types:**
| Type | Description |
|------|-------------|
| `headshot` | Head/portrait |
| `halfbody` | Waist-up |
| `fullbody` | Full character |
| `emoji` | Discord emoji |

**What happens:**
1. Bot shows you a confirmation with the user's ticket roles and who's next in the queue
2. You click Confirm
3. Bot sends `$add <@artistId>` to add the artist to the ticket
4. That artist moves to the back of the queue
5. Assignment gets logged in history

**Examples:**
```
/redeemreward user:@Winner type:headshot
/redeemreward user:@Winner type:fullbody artist:@SpecificArtist
```

---

## Movie Night

Track who shows up to movie nights and automatically give out tier roles based on attendance.

### How It Works

1. **Start tracking** ‚Äî When the movie begins, use `/movie start` to monitor the voice channel
2. **Bot watches** ‚Äî Everyone's time in the VC gets recorded
3. **End the event** ‚Äî When the movie's over, use `/movie end` to finalize everything
4. **Roles get assigned** ‚Äî Anyone who stayed 30+ minutes gets credit, and tier roles update automatically

### Tier Roles

You need to stay **at least 30 minutes** during a movie night for it to count toward your tier.

| Tier | Role | How to earn it |
|------|------|----------------|
| T1 | <@&1388676461657063505> | Attend 1+ movie night |
| T2 | <@&1388676662337736804> | Attend 5+ movie nights |
| T3 | <@&1388675577778802748> | Attend 10+ movie nights |
| T4 | <@&1388677466993987677> | Attend 20+ movie nights |

**Important:** People only get promoted, never demoted. If someone has <@&1388675577778802748> and misses a few movies, they keep the role.

### `/movie`
**Who can use it:** Staff

| Subcommand | What it does |
|------------|--------------|
| `start` | Begin tracking attendance in a voice channel |
| `end` | Finish the event and hand out roles |
| `attendance` | See who attended or check a specific person's history |

**Start options:**
| Option | Required? | What it does |
|--------|-----------|--------------|
| `channel` | **Yes** | Which voice channel to track |

**Attendance options:**
| Option | Required? | What it does |
|--------|-----------|--------------|
| `user` | No | Check a specific person ‚Äî leave blank to see everyone |

**Examples:**
```
/movie start channel:#movie-night-vc
/movie end
/movie attendance
/movie attendance user:@Username
```

**Edge cases the bot handles:**
- Someone joins, leaves, and rejoins ‚Äî all their time gets added up
- Someone was already in the VC when you started tracking ‚Äî counted from start time
- Bot restarts mid-movie ‚Äî session data is preserved, nothing lost

---

## Role Automation

Set up automatic role assignments based on Amaribot levels and movie night attendance.

### `/roles`
**Who can use it:** Manage Roles permission

Configure which roles get assigned automatically.

| Subcommand | What it does |
|------------|--------------|
| `add-level-tier` | Connect an Amaribot level to a role |
| `add-level-reward` | Give a one-time token role when someone hits a level |
| `add-movie-tier` | Set up a movie attendance tier |
| `list` | See all your configured mappings |
| `remove-level-tier` | Delete a level tier mapping |
| `remove-level-reward` | Delete a level reward |
| `remove-movie-tier` | Delete a movie tier |

**How level automation works:**
When Amaribot announces someone leveled up, the bot checks if there's a role configured for that level. If there is, they get it automatically.

**Examples:**
```
/roles add-level-tier level:15 role:@Engaged Fur
/roles add-level-reward level:15 role:@Byte Token [Common]
/roles add-movie-tier tier_name:Popcorn Club role:@Popcorn Club movies_required:5
/roles list type:level_tier
/roles list type:level_reward
/roles list type:movie_tier
```

---

### `/panic`
**Who can use it:** Staff

Emergency stop button for role automation. If roles are getting assigned incorrectly, use this immediately.

| Subcommand | What it does |
|------------|--------------|
| `on` | **STOP** all automatic role grants right now |
| `off` | Resume normal operation |
| `status` | Check if panic mode is currently on |

**When to hit the panic button:**
- Roles going to the wrong people
- Duplicate roles being added
- Any weird role behavior you don't understand
- Before making configuration changes (just to be safe)

**Examples:**
```
/panic on
/panic status
/panic off
```

---

## Configuration

Set up how the bot behaves in your server.

### `/config`
**Who can use it:** Administrator

Server-wide bot settings.

| Subcommand | What it does |
|------------|--------------|
| `set logging_channel` | Where bot actions get logged |
| `set flags_channel` | Where Silent-Since-Join alerts go |
| `set flags_threshold` | How many days before flagging silent members (7-365) |
| `set dadmode` | Toggle the "Hi hungry, I'm Dad!" joke responses |
| `set pingdevonapp` | Toggle whether to ping Bot Dev when new apps come in |
| `set suggestion_channel` | Where suggestions get posted |
| `set suggestion_cooldown` | How long between suggestions (in seconds) |
| `get logging` | Check your logging settings |
| `get flags` | Check your flags settings |
| `view` | See all your current settings at once |

**What's Dad Mode?**
When someone says "I'm hungry" (or any "I'm [thing]"), the bot has a random chance to respond "Hi hungry, I'm Dad!" It's silly but people seem to like it.

**What's Silent-Since-Join?**
The bot can flag users who've been in the server for X days but have never sent a single message. Helps catch lurker bots or inactive accounts.

**Examples:**
```
/config set logging_channel channel:#mod-logs
/config set dadmode state:true chance:500
/config set flags_threshold days:14
/config set suggestion_channel channel:#suggestions
/config view
```

---

### `/review-set-notify-config`
**Who can use it:** Administrator

Set up notifications for new forum posts (for application review forums).

| Option | Required? | What it does |
|--------|-----------|--------------|
| `mode` | No | `post` (reply in the thread) or `channel` (send to a separate channel) |
| `role` | No | Which role to ping |
| `forum` | No | Which forum channel to watch |
| `channel` | No | Where to send notifications (for channel mode) |
| `cooldown` | No | Minimum seconds between notifications |
| `max_per_hour` | No | Cap on notifications per hour |

---

### `/review-get-notify-config`
**Who can use it:** Administrator

Check your current forum notification settings.

---

### `/review-set-listopen-output`
**Who can use it:** Manage Guild

Control whether `/listopen` results are visible to everyone or just you.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `mode` | **Yes** | `public` or `ephemeral` |

---

## Utility & Admin

General-purpose tools and admin commands.

### `/update`
**Who can use it:** Bot Owner only

Change the bot's Discord presence and profile.

| Subcommand | What it does |
|------------|--------------|
| `activity` | What the bot is "doing" (Playing, Watching, Listening, etc.) |
| `status` | Custom status text |
| `banner` | Update banners (profile, gate embed, welcome embed, website) |
| `avatar` | Change the bot's profile picture |

**Activity types:** Playing, Streaming, Listening, Watching, Competing

**Examples:**
```
/update activity type:watching text:over the gate
/update status text:Protecting the realm üõ°Ô∏è
/update banner image:<attachment>
/update avatar image:<attachment>
```

---

### `/send`
**Who can use it:** Manage Messages

Post a message as the bot. Good for announcements where you don't want to show who wrote it.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `message` | **Yes** | What to say |
| `embed` | No | Make it a fancy embed (default: false) |
| `reply_to` | No | Reply to a specific message ID |
| `attachment` | No | Include a file or image |
| `silent` | No | Block all @mentions (default: true) |

**Examples:**
```
/send message:Welcome to the server!
/send message:Important announcement embed:true
/send message:As requested... reply_to:123456789012345678
/send message:Check out this image attachment:<file>
```

---

### `/purge`
**Who can use it:** Manage Messages + Password

Mass delete messages in a channel. Requires the admin password because this is destructive.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `password` | **Yes** | Admin password |
| `count` | No | How many messages (default: all in channel) |

**Heads up:**
- Discord only lets you delete messages less than 14 days old
- It's rate limited so you can't nuke everything instantly

**Example:**
```
/purge password:*** count:50
```

---

### `/poke`
**Who can use it:** Bot Owner only

Ping someone across multiple channels in a category. For when you really need to get someone's attention.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `user` | **Yes** | Who to poke |

---

### `/health`
**Who can use it:** Everyone

Quick check to see if the bot is working properly.

**Shows you:**
- Uptime (how long since last restart)
- WebSocket latency (connection to Discord)
- Database status
- Memory usage

**Example:**
```
/health
```

---

### `/activity`
**Who can use it:** Everyone

See a heatmap of when the server is most active. Shows message volume by day and hour.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `weeks` | No | How far back to look (1-8 weeks, default: 1) |

**The heatmap shows:**
- Activity broken down by day of week and hour
- Color intensity = message volume
- Trend analysis (busier or quieter than usual)

**Examples:**
```
/activity
/activity weeks:4
```

---

### `/backfill`
**Who can use it:** Staff

Rebuild the activity data by scanning message history. Use this after first enabling activity tracking, or if the data seems incomplete.

| Option | Required? | What it does |
|--------|-----------|--------------|
| `weeks` | No | How far back to scan (1-8 weeks, default: 8) |
| `dry-run` | No | Test without actually saving anything |

**Note:** This can take a while for busy servers.

---

### `/database`
**Who can use it:** Bot Owner + Password

Database maintenance and recovery tools.

| Subcommand | What it does |
|------------|--------------|
| `check` | Check database health, integrity, and table sizes |
| `recover` | Interactive assistant for database recovery |

---

## Permission Reference

| Level | Who has it | Example commands |
|-------|------------|------------------|
| **Everyone** | All server members | `/health`, `/activity`, `/suggest` |
| **Staff** | Reviewer role or Manage Guild | `/accept`, `/reject`, `/listopen`, `/modstats` |
| **Leadership** | Server owners + leadership role | `/modhistory` |
| **Administrator** | Administrator permission | `/config`, `/review-set-notify-config` |
| **Bot Owner** | Designated in config | `/update`, `/poke`, `/database` |

### What counts as "Staff"?

You're considered staff if you have ANY of these:
- The configured Reviewer role
- Manage Guild permission
- Administrator permission
- You're the server owner
- You're a bot owner

---

## Troubleshooting

### The buttons on applications aren't working

If Accept/Reject/Kick buttons stop responding:
1. Use the slash commands instead ‚Äî `/accept app:SHORTCODE`
2. Run `/health` to see if the bot is responding at all
3. Find the short code on the application embed (like `A1B2C3`)

### Someone left before I could accept/reject them

You can still process their application using their Discord ID:
```
/accept uid:123456789012345678
/reject uid:123456789012345678 reason:Left during review
```

### I accidentally permanently rejected someone

Use `/unblock` to fix it:
```
/unblock user_id:123456789012345678 reason:Mistake - wrong person
```

### Role automation is doing something weird

1. Run `/panic on` immediately to stop everything
2. Check `/roles list` to see if something's misconfigured
3. Fix whatever's wrong
4. Run `/panic off` to start it back up

### The bot isn't responding at all

1. Check Discord's status page (status.discord.com) ‚Äî might be a Discord issue
2. Ask a bot owner to check the server logs
3. The bot might need a restart

---

## Quick Reference

### Commands you'll use all the time

| Command | What it's for |
|---------|---------------|
| `/accept` | Approve an application |
| `/reject` | Reject an application |
| `/listopen` | See what's pending |
| `/search` | Look up someone's history |
| `/modstats leaderboard` | See mod activity |
| `/health` | Check if bot's working |

### Emergency commands

| Command | What it's for |
|---------|---------------|
| `/panic on` | Stop all role automation NOW |
| `/purge` | Emergency message cleanup |
| `/database check` | Make sure the database is okay |
| `/unblock` | Fix an accidental perm rejection |

---

*Last updated: November 2025*
